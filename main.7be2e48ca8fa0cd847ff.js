(()=>{"use strict";var e={122:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(81),r=n.n(i),a=n(645),s=n.n(a)()(r());s.push([e.id,":root {\n  --black-color: #000000;\n  --white-color: #ffffff;\n}\n\n* {\n  margin: 0;\n  padding: 0;\n\n  box-sizing: border-box;\n}\n\n.page {\n  min-width: 1040px;\n  height: 100vh;\n\n  font-family: Arial, Helvetica, sans-serif;\n  font-size: 17px;\n  text-align: center;\n\n  background: linear-gradient(to top left, #c1c0fd, #53d4ca);\n}\n\n.head {\n  display: block;\n  padding: 30px 0;\n}\n\n.hint {\n  margin-bottom: 20px;\n}\n\n.keyboard__output {\n  width: 1000px;\n  padding: 10px 20px;\n\n  font-size: 16px;\n\n  border: 3px solid var(--black-color);\n  border-radius: 10px;\n\n  outline: none;\n  resize: none;\n}\n\n.keyboard {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  gap: 5px;\n  width: 1000px;\n  margin: 0 auto;\n  padding: 10px;\n\n  border: 3px solid var(--black-color);\n  border-radius: 10px;\n}\n\n.key {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 60px;\n  height: 60px;\n\n  border: 3px solid var(--black-color);\n  border-radius: 5px;\n\n  transition: all 0.1s;\n}\n\n.key:hover {\n  background-color: rgba(193, 192, 253, 0.6);\n\n  cursor: pointer;\n}\n\n.key.active {\n  background-color: rgb(193, 192, 253, 0.9);\n  box-shadow: inset 0 0 3px 1px var(--black-color);\n}\n\n.fn-key {\n  flex: 1;\n} \n\n.tab {\n  flex: 70px;\n}\n\n.caps-lock,\n.enter {\n  flex: 120px;\n}\n\n.shift-left {\n  flex: 65px;\n}\n\n.shift-right {\n  flex: 160px;\n}\n\n.space {\n  flex: 300px;\n}\n\n.arrow-left,\n.arrow-right,\n.arrow-up,\n.arrow-down {\n  flex: 40px;\n\n  font-size: 30px;\n}\n\n.control-left,\n.control-right,\n.alt-left,\n.alt-right {\n  flex: 95px;\n}",""]);const o=s},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",i=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),i&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),i&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,i,r,a){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(i)for(var o=0;o<this.length;o++){var c=this[o][0];null!=c&&(s[c]=!0)}for(var u=0;u<e.length;u++){var l=[].concat(e[u]);i&&s[l[0]]||(void 0!==a&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=a),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),r&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=r):l[4]="".concat(r)),t.push(l))}},t}},81:e=>{e.exports=function(e){return e[1]}},379:e=>{var t=[];function n(e){for(var n=-1,i=0;i<t.length;i++)if(t[i].identifier===e){n=i;break}return n}function i(e,i){for(var a={},s=[],o=0;o<e.length;o++){var c=e[o],u=i.base?c[0]+i.base:c[0],l=a[u]||0,h="".concat(u," ").concat(l);a[u]=l+1;var d=n(h),f={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==d)t[d].references++,t[d].updater(f);else{var p=r(f,i);i.byIndex=o,t.splice(o,0,{identifier:h,updater:p,references:1})}s.push(h)}return s}function r(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,r){var a=i(e=e||[],r=r||{});return function(e){e=e||[];for(var s=0;s<a.length;s++){var o=n(a[s]);t[o].references--}for(var c=i(e,r),u=0;u<a.length;u++){var l=n(a[u]);0===t[l].references&&(t[l].updater(),t.splice(l,1))}a=c}}},569:e=>{var t={};e.exports=function(e,n){var i=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,r&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var a=n.sourceMap;a&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(i,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var a=t[i]={id:i,exports:{}};return e[i](a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=n(379),t=n.n(e),i=n(795),r=n.n(i),a=n(569),s=n.n(a),o=n(565),c=n.n(o),u=n(216),l=n.n(u),h=n(589),d=n.n(h),f=n(122),p={};function m(e,t,n,i){let r=null;try{r=document.createElement(e)}catch(e){throw new Error("Unable to create HTMLElement! Invalid tag name.")}if(t&&(r.innerHTML=t),n){const e=Array.isArray(n)?n:n.split(" ");r.classList.add(...e)}return i&&i.forEach((([e,t])=>r.setAttribute(e,t))),r}function y(e,t){try{if(!e||"object"!=typeof e)throw new Error("You're trying to insert invalid element datatype.");if(!t||"object"!=typeof t)throw new Error("You're trying to insert invalid container datatype.");Array.isArray(e)?e.forEach((e=>t.append(e))):t.append(e)}catch(e){throw new Error(e.message)}}p.styleTagTransform=d(),p.setAttributes=c(),p.insert=s().bind(null,"head"),p.domAPI=r(),p.insertStyleElement=l(),t()(f.Z,p),f.Z&&f.Z.locals&&f.Z.locals;class g{constructor(e){this.language=e,this.key=null}createKey({main:e,fn:t,code:n}){let i=t?"key fn-key":"key";if(!/Key|Digit/.test(n)){const e=n.split("");e[0]=e[0].toLowerCase();const t=n.search(/[a-z][A-Z].*$/);-1!==t&&(e[t+1]=`-${e[t+1].toLowerCase()}`),i+=` ${e.join("")}`}const r=e[this.language]||e;return this.key=m("div",r,i),this.key}}const v=[{main:{ru:"ё",en:"`"},shift:{ru:"Ё",en:"~"},code:"Backquote"},{main:"1",shift:"!",code:"Digit1"},{main:"2",shift:{ru:'"',en:"@"},code:"Digit2"},{main:"3",shift:{ru:"№",en:"#"},code:"Digit3"},{main:"4",shift:{ru:";",en:"$"},code:"Digit4"},{main:"5",shift:"%",code:"Digit5"},{main:"6",shift:{ru:":",en:"^"},code:"Digit6"},{main:"7",shift:{ru:"?",en:"&"},code:"Digit7"},{main:"8",shift:"*",code:"Digit8"},{main:"9",shift:"(",code:"Digit9"},{main:"0",shift:")",code:"Digit0"},{main:"-",shift:"_",code:"Minus"},{main:"=",shift:"+",code:"Equal"},{main:"Backspace",shift:null,code:"Backspace",fn:!0},{main:"Tab",shift:null,code:"Tab",fn:!0},{main:{ru:"й",en:"q"},shift:{ru:"Й",en:"Q"},code:"KeyQ"},{main:{ru:"ц",en:"w"},shift:{ru:"Ц",en:"W"},code:"KeyW"},{main:{ru:"у",en:"e"},shift:{ru:"У",en:"E"},code:"KeyE"},{main:{ru:"к",en:"r"},shift:{ru:"К",en:"R"},code:"KeyR"},{main:{ru:"е",en:"t"},shift:{ru:"Е",en:"T"},code:"KeyT"},{main:{ru:"н",en:"y"},shift:{ru:"Н",en:"Y"},code:"KeyY"},{main:{ru:"г",en:"u"},shift:{ru:"Г",en:"U"},code:"KeyU"},{main:{ru:"ш",en:"i"},shift:{ru:"Ш",en:"I"},code:"KeyI"},{main:{ru:"щ",en:"o"},shift:{ru:"Щ",en:"O"},code:"KeyO"},{main:{ru:"з",en:"p"},shift:{ru:"З",en:"P"},code:"KeyP"},{main:{ru:"х",en:"["},shift:{ru:"Х",en:"{"},code:"BracketLeft"},{main:{ru:"ъ",en:"]"},shift:{ru:"Ъ",en:"}"},code:"BracketRight"},{main:"\\",shift:{ru:"/",en:"|"},code:"Backslash"},{main:"delete",shift:null,code:"Delete",fn:!0},{main:"Caps Lock",shift:null,code:"CapsLock",fn:!0},{main:{ru:"ф",en:"a"},shift:{ru:"Ф",en:"A"},code:"KeyA"},{main:{ru:"ы",en:"s"},shift:{ru:"Ы",en:"S"},code:"KeyS"},{main:{ru:"в",en:"d"},shift:{ru:"В",en:"D"},code:"KeyD"},{main:{ru:"а",en:"f"},shift:{ru:"А",en:"F"},code:"KeyF"},{main:{ru:"п",en:"g"},shift:{ru:"П",en:"G"},code:"KeyG"},{main:{ru:"р",en:"h"},shift:{ru:"Р",en:"H"},code:"KeyH"},{main:{ru:"о",en:"j"},shift:{ru:"О",en:"J"},code:"KeyJ"},{main:{ru:"л",en:"k"},shift:{ru:"Л",en:"K"},code:"KeyK"},{main:{ru:"д",en:"l"},shift:{ru:"Д",en:"L"},code:"KeyL"},{main:{ru:"ж",en:";"},shift:{ru:"Ж",en:":"},code:"Semicolon"},{main:{ru:"э",en:"'"},shift:{ru:"Э",en:'"'},code:"Quote"},{main:"ENTER",shift:null,code:"Enter",fn:!0},{main:"Shift",shift:null,code:"ShiftLeft",fn:!0},{main:{ru:"я",en:"z"},shift:{ru:"Я",en:"Z"},code:"KeyZ"},{main:{ru:"ч",en:"x"},shift:{ru:"Ч",en:"X"},code:"KeyX"},{main:{ru:"с",en:"c"},shift:{ru:"С",en:"C"},code:"KeyC"},{main:{ru:"м",en:"v"},shift:{ru:"М",en:"V"},code:"KeyV"},{main:{ru:"и",en:"b"},shift:{ru:"И",en:"B"},code:"KeyB"},{main:{ru:"т",en:"n"},shift:{ru:"Т",en:"N"},code:"KeyN"},{main:{ru:"ь",en:"m"},shift:{ru:"Ь",en:"M"},code:"KeyM"},{main:{ru:"б",en:","},shift:{ru:"Б",en:"<"},code:"Comma"},{main:{ru:"ю",en:"."},shift:{ru:"Ю",en:">"},code:"Period"},{main:{ru:".",en:"/"},shift:{ru:",",en:"?"},code:"Slash"},{main:"▴",shift:null,code:"ArrowUp",fn:!0},{main:"Shift",shift:null,code:"ShiftRight",fn:!0},{main:"Ctrl",shift:null,code:"ControlLeft",fn:!0},{main:"Alt",shift:null,code:"AltLeft",fn:!0},{main:" ",shift:null,code:"Space",fn:!0},{main:"Alt",shift:null,code:"AltRight",fn:!0},{main:"◂",shift:null,code:"ArrowLeft",fn:!0},{main:"▾",shift:null,code:"ArrowDown",fn:!0},{main:"▸",shift:null,code:"ArrowRight",fn:!0},{main:"Ctrl",shift:null,code:"ControlRight",fn:!0}];class x{constructor(e){this.language=e,this.elements={}}renderKeyboard(){v.forEach((e=>{const t=new g(this.language);this.elements[e.code]=t.createKey(e)}));const e=m("div",null,"keyboard");return y(Object.values(this.elements),e),{keyboardContainer:e,elements:this.elements}}}const b=("keyboardLanguage","en",window.localStorage.getItem("keyboardLanguage")||"en");const k=new class{constructor(e){this.language=e,this.body=document.body,this.textarea=null,this.elements=null,this.pressedKey={},this.pressedKeyCount={},this.capsLock=!1,this.shift=!1}renderPage(){const e=m("head",null,"head");y(m("h1","RSS Virtual Keyboard","title"),e);const t=m("main",null,"main"),n=m("h3","The virtual keyboard was created in Windows operation system","subtitle"),i=m("p","Switch between English and Russian languages: Ctrl + Alt","hint");this.textarea=m("textarea",null,"keyboard__output",[["autocomplete","off"],["autocorrect","off"],["cols",140],["placeholder","Start typing…"],["rows",10],["spellcheck","false"]]);const r=new x(this.language),{keyboardContainer:a,elements:s}=r.renderKeyboard();this.elements=s,y([n,i,this.textarea,a],t),y([e,t],this.body),window.addEventListener("beforeunload",(()=>{var e;e=this.language,window.localStorage.setItem("keyboardLanguage",e)})),document.addEventListener("keydown",this.handleDownEvent),document.addEventListener("keyup",this.handleUpEvent),document.addEventListener("mousedown",this.handleMouseEvent),document.addEventListener("mouseup",this.handleMouseEvent)}handleMouseEvent=e=>{e.stopPropagation();const{target:t,type:n}=e;if(t.closest(".key")){const i={code:this.findActiveKey(t),type:n,mouseEvent:e};"mousedown"===n?(this.handleDownEvent(i),t.addEventListener("mouseleave",this.resetKeyState)):"mouseup"===n&&(t.removeEventListener("mouseleave",this.resetKeyState),this.handleUpEvent(i))}};resetKeyState=e=>{e.stopPropagation();const{target:t,type:n}=e,i={code:this.findActiveKey(t),type:n};this.handleUpEvent(i)};handleDownEvent=e=>{const{code:t,type:n,mouseEvent:i}=e,r=this.elements[t];if(r&&!e.repeat){/key/.test(n)?e.preventDefault():/mouse/.test(n)&&i.preventDefault(),this.textarea.focus(),this.pressedKey[t]=r,this.pressedKeyCount[t]>1?this.pressedKeyCount[t]+=1:this.pressedKeyCount[t]=1;const a=r.textContent;if("CapsLock"===t){if(this.pressedKeyCount[t]>1)return;r.classList.toggle("active");let e=null;return e=this.shift?this.capsLock:!this.capsLock,this.capsLock=!this.capsLock,void this.changeLetterCase(e)}if(/Alt/.test(t)&&(this.pressedKey.ControlLeft||this.pressedKey.ControlRight)||/Control/i.test(t)&&(this.pressedKey.AltLeft||this.pressedKey.AltRight))return this.language="en"===this.language?"ru":"en",r.classList.add("active"),void this.changeLanguage();if(/Shift/.test(t)){if(this.pressedKeyCount[t]>1)return;if(this.shift||"keydown"!==n||(this.shift=!this.shift),"mousedown"===n){if(this.pressedKeyCount[t]>1)return;return r.classList.toggle("active"),this.shift=!this.shift,void(this.shift?this.addShiftText():this.removeShiftText())}return r.classList.add("active"),void this.addShiftText()}this.outputResultToTextarea(t,a),r.classList.add("active")}};handleUpEvent=e=>{const{code:t,type:n}=e,i=this.pressedKey[t];this.pressedKeyCount[t]-=1,this.pressedKeyCount[t]>1||("keyup"!==n&&("mouseup"!==n&&"mouseleave"!==n||/Shift/.test(t))||"CapsLock"===t||!i||i.classList.remove("active"),/Shift/.test(t)&&"keyup"===n&&(this.shift=!this.shift,this.removeShiftText()),delete this.pressedKey[t])};changeLetterCase=e=>{const t=Object.entries(this.elements),n="en"===this.language?/Key/:/Key|Backquote|Bracket|Semicolon|Quote|Comma|Period/;let i=t.filter((([e])=>n.test(e)));i=i.map((e=>e[1])),i.forEach((t=>{const n=t;n.innerHTML=e?n.innerHTML.toUpperCase():n.innerHTML.toLowerCase()}))};changeLanguage=()=>{v.forEach((({main:e,code:t})=>{e[this.language]&&(this.elements[t].innerHTML=e[this.language])})),this.capsLock&&this.changeLetterCase(!0)};addShiftText=()=>{v.forEach((({shift:e,code:t})=>{e&&(this.elements[t].innerHTML=e[this.language]||e)})),this.capsLock&&this.changeLetterCase(!1)};removeShiftText=()=>{v.forEach((({main:e,shift:t,code:n})=>{t&&(this.elements[n].innerHTML=e[this.language]||e)})),this.capsLock&&this.changeLetterCase(!0)};outputResultToTextarea=(e,t)=>{const{value:n,selectionStart:i}=this.textarea,r=i,a=n.slice(0,r),s=n.slice(r),o=e.match(/(Key[A-Za-z])|(Digit[0-9])|[a-z]*quote|Minus|Equal|Bracket[a-z]*|[a-z]*slash|Semicolon|Comma|Period|Space|ArrowUp|ArrowDown/i);switch(e){case"Backspace":this.textarea.value=`${a.slice(0,-1)}${s}`;break;case"Tab":this.textarea.value=`${a}\t${s}`;break;case"Enter":this.textarea.value=`${a}\n${s}`;break;case"Delete":this.textarea.value=`${a}${s.slice(1)}`;break;case o?o[0]:null:this.textarea.value=`${a}${t}${s}`;break;default:this.textarea.value=`${a}${s}`}this.movePointer(e,r)};movePointer=(e,t)=>{let n=t;switch(e){case"Backspace":case"ArrowLeft":n-=n>0?1:0;break;case"Delete":n+=0;break;default:n+=1}this.textarea.setSelectionRange(n,n)};findActiveKey=e=>{const t=Object.entries(this.elements),[n]=t.find((([,t])=>t===e));return n}}(b);k.renderPage()})()})();